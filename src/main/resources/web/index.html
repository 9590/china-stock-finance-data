<!DOCTYPE html>
<html>
<head>
<meta charset="gb2312">
<title>Insert title here</title>
<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="jquery-1.11.2.min.js"></script>

<link href="bootstrap/css/bootstrap.css" rel="stylesheet"
	type="text/css" />
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet"
	type="text/css" />
<style>
th, td {
	text-align: left;
	padding-right: 15px;
}

h5 {
	display: inline-block;
}

select {
	display: inline-block;
	margin-left: 30px;
}
.stock-filter{
	display: inline-block;
}
</style>
<script>
	symbol = "600000";
	FinanceType = {
		"zycwzb" : {
			"id" : "zycwzb",
			"name" : "主要财务指标"
		},
		"zcfzb" : {
			"id" : "zcfzb",
			"name" : "资产负债表"
		},
		"lrb" : {
			"id" : "lrb",
			"name" : "利润表"
		},
		"xjllb" : {
			"id" : "xjllb",
			"name" : "现金流量表"
		}
	};

	ReportType = {
		"year" : {
			"id" : "year",
			"name" : "年报"
		},
		"season" : {
			"id" : "season",
			"name" : "季报"
		},
		"report" : {
			"id" : "report",
			"name" : "报告期"
		}
	};
</script>
</head>
<body>
	<div>

		<h5></h5>
		<div class="stock-filter">
		<select class="finance-type"></select>
		 <select class="report-type"></select>
		</div>
		<table class="table">
			<thead>
				<tr>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
	</div>

</body>

<script type="text/javascript">
	$("h5").text(symbol);
	
	$("select.finance-type").append(
			'<option id="'+FinanceType.zycwzb.id+'">' + FinanceType.zycwzb.name
					+ '</option>');
	$("select.finance-type").append(
			'<option id="'+FinanceType.zcfzb.id+'">' + FinanceType.zcfzb.name
					+ '</option>');
	$("select.finance-type").append(
			'<option id="'+FinanceType.lrb.id+'">' + FinanceType.lrb.name
					+ '</option>');
	$("select.finance-type").append(
			'<option id="'+FinanceType.xjllb.id+'">' + FinanceType.xjllb.name
					+ '</option>');

	$("select.report-type").append(
			'<option id="'+ReportType.year.id+'">' + ReportType.year.name
					+ '</option>');
	$("select.report-type").append(
			'<option id="'+ReportType.season.id+'">' + ReportType.season.name
					+ '</option>');
	$("select.report-type").append(
			'<option id="'+ReportType.report.id+'">' + ReportType.report.name
					+ '</option>');

	//zycwzb(主要财务指标), zcfzb(资产负债表), lrb(利润表), xjllb(现金流量表)
	
    reportType = ReportType.year;
    financeType = FinanceType.zcfzb;
	symbol = "600000";
	
	function loadStockFinanceData(){
		$.ajax({
			"url" : symbol + "/" + financeType.id + "/" + reportType.id,
			dataType : "json",
			success : function(data) {
				fillStockData(data);
			}
		});
	}
	
	loadStockFinanceData();
	
</script>
<script>
	function fillStockData(data) {
		var headRowData = data[0];
		var firstRow = $("table thead tr");
		firstRow.empty();
		for (var i = 0; i < headRowData.length; i++) {
			var th = $("<th nowrap='nowrap'></th>");
			th.text(headRowData[i]);
			firstRow.append(th);
		}

		var tbody = $("table tbody");
		tbody.empty();
		for (var i = 1; i < data.length; i++) {
			var row = $("<tr></tr>")
			var cols = data[i];
			for (var j = 0; j < cols.length; j++) {
				var td = $("<td nowrap='nowrap'></td>");
				td.text(cols[j]);
				row.append(td);
			}
			tbody.append(row);
		}
	}
	function bindEvent(){
		$(".stock-filter").on("change", "select.finance-type, select.report-type", function(){
			var financeTypeId = $("select.finance-type").find("option:selected").attr("id");
			var reportTypeId = $("select.report-type").find("option:selected").attr("id");
			reportType = ReportType[reportTypeId];
			financeType = FinanceType[financeTypeId];
			loadStockFinanceData();
		});
		 
	}
	bindEvent();
</script>
</html>